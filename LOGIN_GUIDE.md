# 🔐 登录功能使用指南

## 功能说明

现在管理看板已经添加了密码保护，防止未授权访问。

## 🔑 登录信息

- **密码**: `affadsense`
- **有效期**: 24 小时（登录后 24 小时内无需重新登录）

## 📝 使用步骤

### 1. 访问系统

打开浏览器访问：
```
http://localhost:3000
```

系统会自动跳转到登录页面：
```
http://localhost:3000/login
```

### 2. 输入密码

在登录页面：
1. 在密码输入框中输入：`affadsense`
2. 点击"登录"按钮
3. 登录成功后自动跳转到管理看板

### 3. 使用管理看板

登录成功后，你可以：
- ✅ 查看实时系统指标
- ✅ 查看 Worker 状态
- ✅ 分配任务给 Worker
- ✅ 查看请求日志

### 4. 登出

在管理看板页面右上角：
- 点击"登出"按钮
- 系统会清除登录状态
- 自动跳转回登录页面

## 🔒 安全特性

### Cookie 保护
- 使用 HttpOnly Cookie 存储认证信息
- Cookie 有效期：24 小时
- 自动过期后需要重新登录

### 自动重定向
- 未登录访问 `/dashboard` 会自动跳转到 `/login`
- 已登录访问 `/login` 会自动跳转到 `/dashboard`

### 密码验证
- 密码错误会显示错误提示
- 不会泄露任何系统信息

## 🎯 访问路径

| 路径 | 说明 | 需要登录 |
|------|------|----------|
| `/` | 首页（自动跳转到登录页） | ❌ |
| `/login` | 登录页面 | ❌ |
| `/dashboard` | 管理看板 | ✅ |
| `/test-worker` | Worker 测试工具 | ❌ |

**注意**: Worker 测试工具不需要登录，因为它是用来模拟 Worker 连接的。

## 🔧 修改密码

如果需要修改密码，编辑文件：
```
app/api/auth/login/route.ts
```

找到这一行：
```typescript
const ADMIN_PASSWORD = 'affadsense';
```

修改为你想要的密码：
```typescript
const ADMIN_PASSWORD = 'your-new-password';
```

保存后重启服务器即可生效。

## 🚀 生产环境建议

在生产环境中，建议：

### 1. 使用环境变量
不要在代码中硬编码密码，使用环境变量：

```typescript
const ADMIN_PASSWORD = process.env.ADMIN_PASSWORD || 'affadsense';
```

在 `.env` 文件中设置：
```
ADMIN_PASSWORD=your-secure-password
```

### 2. 使用更强的密码
- 至少 12 个字符
- 包含大小写字母、数字和特殊字符
- 定期更换密码

### 3. 添加更多安全措施
- 实现登录失败次数限制
- 添加验证码
- 使用 JWT 代替简单的 token
- 启用 HTTPS
- 添加日志记录

### 4. 考虑使用专业的认证服务
- NextAuth.js
- Auth0
- Firebase Authentication

## 🐛 故障排查

### 问题 1: 输入正确密码但提示错误

**解决方法**:
1. 确认密码没有多余的空格
2. 检查是否区分大小写
3. 刷新页面重试

### 问题 2: 登录后立即跳回登录页

**解决方法**:
1. 检查浏览器是否禁用了 Cookie
2. 清除浏览器缓存和 Cookie
3. 尝试使用无痕模式

### 问题 3: 登录后显示空白页面

**解决方法**:
1. 打开浏览器控制台（F12）查看错误
2. 刷新页面（Ctrl + F5）
3. 检查服务器是否正常运行

## 📋 测试清单

完成以下测试：

- [ ] 访问首页自动跳转到登录页
- [ ] 输入错误密码显示错误提示
- [ ] 输入正确密码成功登录
- [ ] 登录后可以访问管理看板
- [ ] 未登录直接访问 `/dashboard` 会跳转到登录页
- [ ] 点击"登出"按钮成功登出
- [ ] 登出后无法访问管理看板
- [ ] Cookie 在 24 小时后自动过期

## 🎉 开始使用

现在你的管理看板已经受到密码保护！

1. 访问 http://localhost:3000
2. 输入密码：`affadsense`
3. 开始使用管理看板

祝使用愉快！🚀
